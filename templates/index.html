<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>英訳トレーニング</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container">
    <h1>英訳トレーニング</h1>
    <p class="subtitle">日本語を書き換えて、英訳しやすくする練習</p>

    <!-- ページ1: 日本語入力 -->
    <section id="page-input" class="card page-section">
      <div class="step-header">
        <span class="step-number">ページ 1 / 3</span>
        <h2>問題文を入力してください</h2>
      </div>
      <textarea id="inputText" placeholder="例: 石の上にも三年。継続は力なり。&#10;例: 和文英訳では、日本語の文をまずわかりやすいすなわち訳しやすい文に書き換えて、その後英語に直すことが重要です。複数の文章を入力できます。"></textarea>
      
      <div class="setting-box">
        <h3>AIの創造性レベル</h3>
        <div class="temperature-control">
          <label for="temperatureSlider">
            <span id="temperatureLabel">バランス型 (0.7)</span>
          </label>
          <input type="range" id="temperatureSlider" min="0" max="10" value="7" step="1">
          <div class="temperature-marks">
            <span>保守的<br><small>0.0</small></span>
            <span>バランス<br><small>0.5</small></span>
            <span>創造的<br><small>1.0</small></span>
          </div>
          <p class="temperature-description" id="temperatureDescription">
            適度に多様な候補を生成します。元の文に忠実でありながら、いくつか異なる表現を試します。
          </p>
        </div>
      </div>
      
      <div class="row">
        <button id="btnNext1" class="primary">次へ</button>
      </div>
    </section>

    <!-- ページ2: AIが生成した候補から選択 -->
    <section id="page-rewrite" class="card page-section hidden">
      <div class="step-header">
        <span class="step-number">ページ 2 / 4</span>
        <h2>翻訳しやすい書き換え候補から選んでください</h2>
      </div>
      <div class="info-box">
        <p>🤖 AIが同じ意味で異なる文構造の候補を生成しました</p>
        <p style="font-size:12px;margin-top:4px">最も英訳しやすいと思う候補を選んでください</p>
      </div>
      <div class="original-box">
        <h3>元の問題文</h3>
        <pre id="originalText1" class="box original"></pre>
      </div>
      <div id="candidatesContainer">
        <h3>書き換え候補</h3>
        <div id="candidatesList"></div>
      </div>
      <div class="row">
        <button id="btnSelectCandidate" class="primary" disabled>選択した候補で英訳に進む</button>
        <button id="btnBack1" class="secondary">戻る</button>
      </div>
      <div id="loadingMessage" class="loading hidden">
        <span class="spinner">⏳</span> AIが候補を生成中...
      </div>
    </section>

    <!-- ページ3: 英訳にチャレンジ -->
    <section id="page-translate" class="card page-section hidden">
      <div class="step-header">
        <span class="step-number">ページ 3 / 3</span>
        <h2>英訳にチャレンジ</h2>
      </div>
      <div class="comparison">
        <div class="comparison-item">
          <h3>元の文</h3>
          <pre id="originalText" class="box original"></pre>
        </div>
        <div class="comparison-item">
          <h3>選んだ書き換え</h3>
          <pre id="simplifiedText" class="box simplified"></pre>
        </div>
      </div>
      <h3>あなたの英訳</h3>
      <textarea id="learnerText" placeholder="まずは自分で英訳してみてください。難しければ「AIで補助」ボタンを使えます。"></textarea>
      <div class="row">
        <button id="btnEvaluate" class="primary">英訳を評価してもらう</button>
        <button id="btnAssist" class="assist">AIで補助</button>
        <button id="btnBack2" class="secondary">戻る</button>
      </div>
      <div id="assistResult" class="box hidden assist-box"></div>
      <div id="evaluationResult" class="evaluation-box hidden">
        <h4>📊 AIによる英訳評価</h4>
        <div id="translationScore"></div>
        <div id="translationComment" class="ai-comment" style="display:block"></div>
        <button id="btnSubmit" class="primary" style="margin-top:12px">完了して結果を見る</button>
      </div>
    </section>

    <!-- 最終確認 -->
    <section id="page-final" class="card page-section hidden">
      <div class="step-header">
        <span class="step-number">完了</span>
        <h2>最終確認</h2>
      </div>
      <div class="final-comparison">
        <div>
          <h3>元の日本語</h3>
          <pre id="finalOriginal" class="box original"></pre>
        </div>
        <div>
          <h3>選んだ書き換え候補</h3>
          <pre id="finalSimplified" class="box simplified"></pre>
        </div>
        <div>
          <h3>あなたの英訳</h3>
          <pre id="finalLearner" class="box learner"></pre>
        </div>
        <div>
          <h3>英訳の評価</h3>
          <pre id="finalEvaluation" class="box ai"></pre>
        </div>
        <div>
          <h3>AIの提案（参考）</h3>
          <pre id="finalAI" class="box ai"></pre>
        </div>
      </div>
      <div class="row">
        <button id="btnRestart" class="primary">最初からやり直す</button>
      </div>
    </section>

  </div>

  <script src="/static/main.js"></script>
</body>
</html>